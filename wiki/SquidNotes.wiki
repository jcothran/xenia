#summary notes on using 'squid' for proxy, redirection server

Wanted to document the steps I went through to get [http://www.squid-cache.org Squid] up and going on one of our virtual servers.

The problem that we were running into is that to open an IP port like port 80 (http) to the outside world from within our university network, there's a whole network administration process to open that or other ports up, which takes some time and overhead.  In our case, it would be easier to share(multiplex) a single open port with multiple servers and redirect the incoming requests based on some keyword in the URL address such as the server1,server2 differentiation in the below URL addresses:

http://mysite.org/server1/...

http://mysite.org/server2/...



{{{
aptitude install squid squid-common



/etc/init.d/squid restart

iptables -t nat -A PREROUTING -d 129.252.37.90 -p tcp --dport 80 -j REDIRECT --to-ports 3128

==

tail -f /var/log/squid/access.log

#list nat table
iptables -L -nv -t nat
#clear nat table
iptables -F -t nat 

/etc/iptables.rules
}}}