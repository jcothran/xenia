#summary taking the vmware image for a quick spin

see also [VMwareHome]

<wiki:toc max_depth="6" />

= Download the vmware player =

== Windows ==

Goto vmware player download page at http://www.vmware.com/download/player/download.html and download, install windows version(2.5.1 tested)

== Linux ==

Goto vmware player download page http://www.vmware.com/download/player/download.html and download the Linux version 2.5.1(the 32-bit, not 64-bit) .bundle file

Used the instructions at https://help.ubuntu.com/community/VMware/Player for guidance, only had to run the following line
{{{
gksudo bash ./VMware-Player-2.5.1-126130.i386.bundle
}}}

== Macintosh ==

see http://www.vmware.com/products/fusion

----

= Download the vmware image instance =

The latest vmware image(version 1.0, rar-compressed size 1.5 GB, uncompressed 6 GB) is available at http://neptune.baruch.sc.edu/xenia/vmware_dist/xeniavm20090213.rar

This vmware image was developed on top of the FOSS geospatial vmware image(geostatistics package which includes 'R') available at http://gisvm.com ([http://www.vmware.com/appliances/directory/55606 appliance description]) - thanks to Ricardo Pinho.

While the Xenia scripts do not directly utilize/interact those included applications in the gisvm image at this time, I thought they represent the best existing collection of FOSS geospatial software for future development.

Start the vmware image on the vmware player by opening the associated .vmx file

----

= Startup issues = 

The image being played may report in the player title the gisvm version 'gisvm20081101en_r' which can be ignored.  I have not determined how to set this title properly yet.

The image should boot to a command line user login.  Login as user *xeniaprod* with password *xeniaprod999*

I have the GUI display (gdm) disabled by default.  To start a GUI session enter the following command and wait for the GUI to display.
{{{
sudo gdm start
}}}

If you wish to re-enable the GUI default behaviour see instructions at http://ubuntuforums.org/showthread.php?t=664199 

While leaving the xenia vmware instance running, it is by default using the xeniaprod crontab to once an hour(at the top of the hour) fetch 3 sample organization hourly data feed files formatted as ObsKML (see ObsKML simple sample below) to populate a local sqlite database and produce several products.

The main file which creates the data process flow can be invoked manually by the following command (also automatically executed hourly at the top of the hour by the xeniaprod crontab)
{{{
bash /home/xeniaprod/cron/xeniaflow.sh
}}}

After the *xeniaflow.sh* script has executed, most of the products listed at [VMwareProductsLocal] should be populated locally.  A few of the graph products,etc require two or more runs before displaying properly so you may have to wait a few hours/passes or so to start seeing proper results.


----
= Adding a new ObsKML feed =

The sample USGS and NERRS feeds are flowing correctly and you are ready to try adding another feed.

Note the following currently available ObsKML feeds at http://carocoops.org/obskml/feeds/
  * ndbc (National Data Buoy Center) _included with test install_
  * nos (National Ocean Service - Tides and Currents)
  * nws (National Weather Service)
  * usf (University of South Florida)
  * nccoos (North Carolina Coastal Ocean Observing System)
  * cormp (UNCS Coastal Ocean Research and Monitoring Program)
  * carocoops (Carolinas Coastal Ocean Observing and Prediction System)
  * wq  (this is Southeast USGS coastal stations) _included with test install_
  * nerrs (National Estuarine Research Reserve System) _included with test install_
  * vos (NOAA Volutary Observing Ships)
  * _can add more ObsKML feeds to an online catalog if community interest_

The following example demonstrates adding an hourly [http://www.nws.noaa.gov/ NWS] ObsKML feed as available from 

http://carocoops.org/obskml/feeds/nws/nws_latest_obskml.zip

== Changes ==

All the following steps are done as user *xeniaprod*

=== Create necessary organization import, archive folders ===
{{{
mkdir /home/xeniaprod/feeds/nws
mkdir /home/xeniaprod/feeds/nws/archive
}}}
=== Edit xeniaprod crontab to nightly cleanup archive files ===
As user xeniaprod run the following command to edit xeniaprod crontab in 'nano' editor
{{{crontab -e}}}
add line
{{{
2 0 * * * find /home/xeniaprod/feeds/ndbc/archive/* -maxdepth 1 -cmin +1400 -exec rm -f {} \;
}}}
=== Edit /home/xeniaprod/cron/getObskml.sh ==
add line
{{{
wget http://carocoops.org/obskml/feeds/nws/nws_latest_obskml.zip -O /home/xeniaprod/feeds/nws/nws_metadata_latest.kmz
}}}
=== Edit /home/xeniaprod/cron/mk_xenia_all_latest.sh ===
add line
{{{
unzip -q "../nws/nws_metadata_latest.kmz" >> /home/xeniaprod/tmp/cron.log 2>&1    
}}}


{{{
add getObskml.sh
add styleLatest.sh

#check_status - array, graph spots
}}}

== ObsKML simple samlpe ==

blah

== Example scripts for generating ObsKML ==

Here are some example scripts detailing how to create ObsKML from several data source types

http://nautilus.baruch.sc.edu/twiki_dmcc/bin/view/Main/ObsKMLGenerate

*Note that the ObsKML schema does not currently utilize an 'obskml:' namespace convention but may in a future version.*

If you have created an ObsKML feed that you would like to share please email me (jeremy.cothran@gmail.com) and I will add it to an online community catalog.