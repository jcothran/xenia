#summary internal reference to server setup

<wiki:toc max_depth="6" />

= Server room = 

Server names,IP's from the door entrance toward the back of the room.

<hr />
Rack 1 (top to bottom) <br />
<img src="http://xenia.googlecode.com/files/Img_2261.jpg" height="400" width="320" />
<img src="http://xenia.googlecode.com/files/Img_2262.jpg" height="400" width="320" />
<img src="http://xenia.googlecode.com/files/Img_2263.jpg" height="400" width="320" />

{{{
esxi 139.198 
  139.139 - mapserver,tilecache engine,remotesensing image copying/db ref
  139.134 - projects
  139.169 - erddap
  139.88  - geoportal

  139.186 - cormp1
  139.199 - 52North
  139.78  - madrona(old instance)

esxi 37.87 
  neptune 37.90 main production, gomodp exchange software 
  139.124 - squid forwarding(see /etc/squid/squid.conf), test/development, plone, old trident(formerly 139.178) - hfradar, dap
  139.156 - archivalDB
  139.229 - test server - drupal, wordpress-gsaa

nautilus
  
NWS Marine Weather Portal(MWP) project - Charlton Galvarino 
  nwstwo(37.58 = 139.54 (routed via squid at 139.124), earlier 139.110 nile?)
  nwsone(37.59 = 139.109 neo)

#Secoora servers - installed August 2012
esxi 139.228

esxi 139.184
  139.70 - thredds
  139.236 - madrona_dan(marco site new instance)
  37.88 - nautilus

#GSAA server - installed August 2012
esxi 139.238
  139.110 gsaa arcgis server

}}}

<hr />
Rack 2 (top to bottom)<br />
<img src="http://xenia.googlecode.com/files/Img_2264.JPG" height="400" width="320" />
<img src="http://xenia.googlecode.com/files/Img_2265.jpg" height="400" width="320" />
<img src="http://xenia.googlecode.com/files/Img_2266.jpg" height="400" width="320" />

torino(Charlton Galvarino - MWP project), old neptune(offline), nemo(offline)

----
= Squid re-routing, server keywords = 

requests routed through 129.252.139.124 use squid (see [SquidNotes]) to subroute based on server keyword like http://129.252.139.124/mapping/...

squid mapping (on 129.252.139.124, /etc/squid/squid.conf)

any changes run /etc/init.d/squid restart

{{{

cache_peer 129.252.139.139 parent 80 0 proxy-only name=mapServer
cache_peer 129.252.139.144 parent 80 0 proxy-only name=cormp1Server
#cache_peer 129.252.139.71 parent 80 0 proxy-only name=xenia2vmServer
cache_peer 129.252.139.156 parent 80 0 proxy-only name=xenia2Server
cache_peer 129.252.139.124 parent 80 0 proxy-only name=squidServer
cache_peer 129.252.37.88 parent 80 0 proxy-only name=nautilusServer
cache_peer 129.252.139.80 parent 80 0 proxy-only name=drupalServer
cache_peer 129.252.139.124 parent 80 0 proxy-only name=tridentServer


##
acl mapserv_url url_regex -i mapserv
#acl arch_url url_regex -i http://129.252.139.178/xenia
http_access allow mapserv_url
cache_peer_access mapServer allow mapserv_url

acl tilecache_url url_regex -i tilecache
http_access allow tilecache_url
cache_peer_access mapServer allow tilecache_url

acl mapping_url url_regex -i mapping
http_access allow mapping_url
cache_peer_access mapServer allow mapping_url

acl cormp1_url url_regex -i cormp1
http_access allow cormp1_url
cache_peer_access cormp1Server allow cormp1_url

acl xenia2_url url_regex -i xenia2
http_access allow xenia2_url
cache_peer_access xenia2Server allow xenia2_url

acl squid_url url_regex -i squid
http_access allow squid_url
cache_peer_access squidServer allow squid_url

acl nautilus_url url_regex -i storm_surge_data/latest
http_access allow nautilus_url
cache_peer_access nautilusServer allow nautilus_url

acl drupal_url url_regex -i drupal
http_access allow drupal_url
cache_peer_access drupalServer allow drupal_url

##
acl trident_url dstdomain 129.252.139.124
http_access allow trident_url
cache_peer_access tridentServer allow trident_url

acl trident_url dstdomain trident.baruch.sc.edu
http_access allow trident_url
cache_peer_access tridentServer allow trident_url

cache_peer_access tridentServer deny all

}}}

= Remounting changed IP's = 

for NFS remotely mounted folders, use the following commands sudo as root

on target machine edit file

{{{/etc/exports}}}

and run 

{{{exportfs -ra}}}

on source machine edit and re-run mount commands in file

{{{/etc/rc.local}}}


= Earlier links = 

http://nautilus.baruch.sc.edu/twiki_dmcc/bin/view/Main/JeremyCothranNotesServers