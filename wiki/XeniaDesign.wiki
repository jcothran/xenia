#summary Design and comparison issues related to the Xenia schema

This is an earlier documentation [http://nautilus.baruch.sc.edu/twiki_dmcc/bin/view/Main/XeniaDesign webpage] to list some Xenia design considerations, benchmarks, and tips as related to the relational database schema.

= Similar observation schemas =

----

== Hydrology efforts ==

CUAHSI http://his.cuahsi.org

WaterML OGC spec http://xml.coverpages.org/OGC-07-041r1-CUAHSI-WaterML.pdf

REST data access http://www7.ncdc.noaa.gov/rest

----
from http://www.clemson.edu/restoration/events/past_events/sc_water_resources/t5_proceedings_presentations/t5_zip/goodall_ppt.pdf

Summary
  * How can we integrate measurements and models from various sources into a single description of the environment?
  # By decoupling the system into autonomous components and defining standard interfaces between the components
  # By developing algorithms that define the communication between system components (feedback loops, semantic mediation, space/time rescaling of exchanges, etc.)

Remaining Challenges
  * Computational Efficiency
    * How does the “loose-coupling” paradigm scale as systems become more complex?
  * Granularity
    * What level of granularity is necessary and appropriate for modeling a watershed?
  * Semantic mediation
    * How can we match exchanges between multidisciplinary components (semantic mediation,space/time rescaling)?

----

=== OpenMI ===

OpenMI (Open Model Integration environment) 
  * http://www.openmi.org
  * http://www.crwr.utexas.edu/gis/gishydro06/GISandHIS/GISHydro06_Goodall.htm
  * http://code.google.com/u/jon.goodall/

from http://www.crwr.utexas.edu/gis/gishydro06/GISandHIS/GISHydro06_Goodall.htm

The Big Picture: Why use OpenMI?
 
It’s easy to get lost in the details of creating an OpenMI component, so let me first start with a big picture view.  One way to think of OpenMI is as a flexible, extensible modeling engine.  It’s flexible and extensible because developers can make their databases, text files, spreadsheets, FORTRAN models, C models, etc Open-MI compliant.  This basically means that developers tell OpenMI what the values the data source or model is capable of supplying and how to extract these values from the source or model.  OpenMI handles all of the coordination issues between different data source and models (i.e. if a groundwater model needs recharge from a watershed model, OpenMI knows when and how to get the value from the watershed model).  As you would imagine, one of the most difficult issues of model and data integration is misalignment in space and time.  The computational mesh for a watershed, for example, may not match up with the computational mesh for a groundwater model.  OpenMI is designed to handle these misalignments through user defined linkages (watershed node 1 links to groundwater node 2) or spatial linkages (linkages are derived by the spatial overlap and intersection of features). 
 
The issues that arise in model and data integration can become quite complex and OpenMI is a valiant attempt to create a system capable of facilitating the integration of heterogeneous data sources and models.  That said, it still requires a fairly significant amount of work for a model developer to make his or her model “OpenMI compliant”.  The most significant change that needs to be made to make a model OpenMI-compliant is “stripping out” the time looping component of the model so that OpenMI can run the model more interactively through time. Depending on the complexity of your model, this process could take weeks to months to complete (as estimated by the OpenMI group themselves).  Thus, OpenMI might not be the way to go for all modeling activities, but as we become more interdisciplinary and need to integrate models capable of computing different components of the water and biochemical cycles, the applicability of a modeling framework like OpenMI becomes more attractive. 

OpenMI and WaterML https://lists.sdsc.edu/pipermail/his/2008-August/000251.html

----

=== Brief Xenia/Cuahsi-ODM schema comparison ===

[ftp://ftp.research.microsoft.com/pub/tr/TR-2008-92.pdf A Data Model for Environmental Observations] [http://www.carocoops.org/documents/ODM_data_model.pdf pdf]

Reviewed the links and schema and here's some initial comparison and feedback between the ODM and Xenia schemas.

As a general summary I would say the schemas are very similar with both schemas revolving around a central observations table (in ODM, the 'observations values' block - in Xenia, the 'multi_obs' table) with the ODM schema supplying a greater level of attribute detail on its support tables.

Here's a mapping between the ODM block sections in Figure 2 at http://water.usu.edu/cuahsi/odm/files/ODM1.pdf

and the Xenia schema shown at http://code.google.com/p/xenia/wiki/XeniaPackageV2#Xenia_Table_Schema_Diagram

ODM -> Xenia:

observation values -> multi_obs

monitoring site locations -> platform

data sources -> organization

variables -> 'data dictionary' block

data qualifiers -> quality control

data collection methods -> none, maybe qc url, links

----

no mapping:

value grouping

categorical data

series catalog

----

For Xenia I'm taking a less detailed approach with reference to geospatial and time datums. Spatial references are WGS84 and elevation is reference to MSL(Mean Sea Level) with positive indicating meters height above the surface and negative indicating meters depth below the surface.


Things which are in Xenia but not similarly in ODM are as follows:

1)To support vector representations like wind, currents, etc I added a scalar to vector type mapping in my data dictionary. So every observation type is by default a vector of at least one scalar component.

2)Also added a generic 'collection' table which serves to provide a grouping type functionality and metadata to a set of observations, platforms or sensors.

3)The '_attr' tables can also function in a similar generic user defined manner, although I haven't really utilized them.

4)There is a specific articulation for Xenia of organizations->platforms->sensors->observations. There isn't a 'sensor' specific table that I see in ODM. Xenia uses the concept of sensors which are associated with a specific observation type (m_type_id) and s_order (1,2,3,...) to differentiate between redundant sensors or profiling sensors of the same observation type.

The separate articulation of the sensor table also serves summary observation type discovery purposes similar to the ODM observation lookup tables.

----

Also found the following quote parallels my caveat at http://code.google.com/p/xenia/wiki/XeniaHome#Description in regards to the use cases for this type relational database.

----

From the pdf p.2

This approach carries the burden of record level metadata, so it is not appropriate for all variables that might be observed. For example, individual pixel values in large remotely sensed images or grids are inappropriate for this model.

----

I would add that I am also looking towards performance enhancing query responses on Xenia databases by having multiple databases which are structured the same but contain only data relevant to a given manageable time-window (the most recent few days of data versus say monthly or yearly archival databases). Similar 'divide and conquer' approaches could be applied based on region or area to manage response similar to image tiling based solutions.

A common problem that I see to both databases is outside referential identification integrity and provenance of transient metadata. For Xenia I have begin/end dates associated with parent type record id's but what I need to do is associate metadata attributes which may change on say a monthly or yearly basis to a child lookup table(like say sensor->sensor_metadata) which is associated with a fixed parent record (for long term identification purposes) while some of the more transient attributes can change on the child table with associated begin/end dates.

----

In regards to exchange between the Xenia and ODM, the path I provide is ObsKML which is the default XML import/export format for Xenia.
----
== EPA Exchange Network ==

http://www.exchangenetwork.net/index.htm

http://www.epa.gov/storet/wqx_downloads.html

Water Quality Exchange Entity Relationship Diagram version 2.0
http://www.epa.gov/storet/wqx_products/WQX_ERD_v2.11.pdf

----
== Seamonster ==

http://robfatland.net/seamonster/index.php?title=Main_Page