#summary This page is for general SQL notes for the Xenia DB.


= SELECT dates from one sensor that are the same dates from another sensor =
Recently I wanted to do some correlation testing for our platforms against some known good NDBC platforms. Correlation requires the list of values to be the same length, however we might miss an update throughout the day so we'd have a hole in our data. This query is useful to make sure the dates in the outer select match the dates in the sbuquery select, thereby giving us the data points for the same time periods. You have to execute this twice, swapping the sensor ID's.

{{{
SELECT m_date,sensor_id,m_value,d_report_hour as control_hour 
FROM multi_obs mo 
WHERE m_date >= '2011-03-23T00:00:00' and 
m_date < '2011-03-23T24:00:00' AND 
sensor_id = 518 AND 
EXISTS 
(SELECT d_report_hour 
FROM multi_obs 
WHERE m_date >= '2011-03-23T00:00:00' AND 
m_date < '2011-03-23T24:00:00' AND 
sensor_id=4644 and 
mo.d_report_hour=d_report_hour) 
ORDER BY sensor_id ASC, d_report_hour ASC;
}}}